
# 基于粒子群算法迭代优化的无人机锥形编队方案

## 摘要

对于问题2，题目给出了锥形的编队场景，具体任务同问题一的三小问一样是调整无人机至正确的位置。因此，我们仍然选择粒子群优化算法，通过定义一个几何结构的适应度函数，来量化任一队形与其理想锥形构型的差距，不断迭代来寻找全局最优。我们也自己编缀了验证数据，证明了本方案的可行性。


## 问题重述与分析

问题2要求为15架无人机设计一个调整方案，使其从一个有偏差的初始状态，调整为一个特定的锥形编队。在此编队中，所有相邻无人机之间的距离被设定为固定值（本体是50m）。与问题1第三小问的圆形编队相比，锥形编队的几何结构更为复杂，内部连接关系多样，无人机之间的位置耦合性更强。

我们遇到的挑战是如何从一个混乱的初始布局出发，为全部15架无人机同时找到一组能够完美构成目标锥形的坐标。我们考虑过A*算法，但是简单地让每架无人机飞向最近的理想点会导致分配冲突。因此，鉴于要寻找一个全局最优位置，我们采用粒子群迭代优化算法。

## 模型建立

本方案的解决思路是通过数学建模将“完美的锥形”这一概念量化；然后利用PSO求解该数学模型，找到最优解。

### 适应度函数

我们通过`get_ideal_pairs()`函数，定义了理想锥形编队中所有应相距50m的无人机对。这个“连接对”列表是锥形几何拓扑的数学表达，是算法判断队形优劣的唯一依据。

**指标**：为了量化一个“候选队形”与理想构型的差距，我们设计了`calculate_cone_fitness`函数。该函数接收一个“粒子”（也就是一个完整的15机编队方案）作为输入，然后执行以下操作：
- 遍历`get_ideal_pairs`列表中的每一对无人机。
- 计算这对无人机在当前粒子方案中的实际距离。
- 计算该实际距离与理想距离的误差平方。
- 将所有无人机对的误差平方累加，得到一个总误差值，即该粒子的适应度。适应度值越低，代表队形越接近完美的锥形。

**解空间与原点**：
- **解空间**：是一个28维的空间（14架可动无人机 × 2个坐标）。
- **原点**：我们将`FY11`无人机视为坐标原点(0,0)，不参与优化。所有其他无人机的最优位置都是相对于这个原点计算的。

### 粒子群优化算法(PSO)

粒子群优化算法在问题一的第三小问已经介绍，这里不再赘述。接下来我们论述在本问题中的粒子群的实现：

- **粒子定义**：每个“粒子”代表一个由14架可动无人机坐标构成的完整编队方案。
- **优化流程**：算法初始化500个“候选方案”（粒子），然后在100次迭代中，每个粒子依据其“个体历史最佳”和“群体全局最佳”的经验来更新自己的飞行方向和速度。通过这种个体学习和社会学习的结合，整个粒子群逐渐向适应度函数值最低的区域收敛，最终找到全局最优的编队方案`gbest`。

## 参数设置

- **粒子数量 (`n_particles`)**: `100`。确保了足够的种群多样性，以探索复杂的28维解空间。
- **迭代次数 (`n_iterations`)**: `100`。这里没有设为第三小问的1000，而是设为100，原因之一是本问中维度变大，迭代次数过多会大幅增加时间复杂度；二是PSO本身收敛快，100次迭代足以达到很好的效果。
- **惯性权重 (`w`)**: `0.5`。平衡算法的全局探索和局部精细搜索能力。
- **认知系数 (`c1`)**: `0.8`。粒子从自身历史经验中学习的比重。
- **社会系数 (`c2`)**: `0.9`。粒子从群体智慧中学习的比重。

这些参数的设定是经过实践检验的。

## 优化效果对比

(也是把图片放这里)
左图是初始布局，无人机的位置里理想位置有所偏差；右图是PSO优化后的无人机布局，无人机几乎到达了理想位置。


**=== 编队精度表 ===**
| 测量点 | 初始偏差 (m) | 优化后偏差 (m) |
|--------|--------------|----------------|
| FY01   | 1.03         | 0.05           |
| FY02   | 3.99         | 0.03           |
| FY03   | 1.27         | 0.04           |
| FY04   | 1.62         | 0.01           |
| FY05   | 3.00         | 0.11           |
| FY06   | 0.38         | 0.03           |
| FY07   | 1.92         | 0.10           |
| FY08   | 0.56         | 0.00           |
| FY09   | 2.16         | 0.15           |
| FY10   | 1.00         | 0.01           |
| FY12   | 1.65         | 0.04           |
| FY13   | 1.12         | 0.05           |
| FY14   | 2.00         | 0.04           |
| FY15   | 1.22         | 0.03           |
| **平均偏差** | **1.64**     | **0.05**       |
| **最大偏差** | **3.99**     | **0.15**       |

精度改进: 96.9%

通过对比，可以一目了然地看出本方案将一个有偏差的布局优化为一个高度精确、贴合理想的布局，这证明本方案具有实际可行性。